# JABUTI IA - Sessao de Trabalho 06/02/2026

## Contexto Geral

**Projeto**: JABUTI IA (MVP)
**Empresa**: EJR Robotica Educacional - Dois Irmaos/RS
**Objetivo**: Plataforma educacional de robotica para ensinar programacao a criancas

---

## Ambiente de Desenvolvimento

| Item | Valor |
|------|-------|
| Maquina Local | ejr-netbook-07 (Linux 6.8.0-90-generic) |
| Raspberry Pi | pi@192.168.0.131 |
| OS da Rasp | Raspbian GNU/Linux 11 (Bullseye) |
| Senha SSH | 123 |
| Diretorio Projeto | /home/ejr-netbook-07/jabuti-ia/mvp-jabuti-ia |
| Diretorio na Rasp | /var/www/html |

---

## Comandos Executados na Sessao

```bash
# 1. Testar conexao SSH (falhou - chave nao registrada)
ssh -o BatchMode=yes -o ConnectTimeout=5 pi@192.168.0.131 "echo 'Conexao OK'"

# 2. Aceitar chave do host (pediu senha)
ssh -o BatchMode=yes -o StrictHostKeyChecking=accept-new pi@192.168.0.131

# 3. Configurar chave SSH (usuario executou manualmente)
ssh-copy-id pi@192.168.0.131

# 4. Copiar projeto da Rasp para o PC
scp -r pi@192.168.0.131:/var/www/html /home/ejr-netbook-07/jabuti-ia/mvp-jabuti-ia/
```

---

## Arquitetura do Projeto

### Stack Tecnologica

| Camada | Tecnologia |
|--------|------------|
| Hardware | Raspberry Pi 3 + Servos modificados (GPIO) |
| Backend | PHP 5.x + MySQL/MariaDB |
| Frontend | HTML/CSS/JavaScript + Google Blockly |
| IA | Python 3 + OpenAI GPT-4o-mini + TTS |
| Servidor Web | Apache (em /var/www/html) |

### Estrutura de Pastas Principais

```
html/
├── jabuti-ai/           # Modulo de IA (Python)
│   ├── recognize.py     # Reconhecimento de voz + GPT
│   ├── command_processor.py  # Processa comandos
│   ├── recorder.py      # Gravacao de audio
│   ├── system_role.txt  # Prompt do GPT
│   ├── .env             # API Key OpenAI (ATENCAO: exposta!)
│   ├── wakeup_words.json
│   └── sleep_words.json
├── services/
│   └── interpreter.py   # Controle GPIO dos motores
├── modulo1.php/js       # Controle manual
├── modulo2.php/js       # Programacao sequencial
├── modulo3.php/js       # Programacao avancada
├── modulo4.php/js       # Programacao avancada+
├── modulo5.php/js       # Programacao com variaveis
├── principal.php/js     # Painel admin
├── index.php            # Login
├── blocks/              # Blocos Blockly customizados
├── scriptsSql/          # Scripts do banco de dados
└── apps/                # Apps Blockly (demos)
```

---

## Comandos do Robo

| Comando | Acao | Exemplo |
|---------|------|---------|
| `pf` | Para frente | `pf 1000` (1 segundo) |
| `pt` | Para tras | `pt 500` (0.5 segundos) |
| `pe` | Virar esquerda | `pe 300` |
| `pd` | Virar direita | `pd 300` |
| `le` | LED esquerdo | `le 500` |
| `ld` | LED direito | `ld 500` |
| `lde` | Ambos LEDs | `lde 200` |
| `bu` | Buzina | `bu 0` |
| `bc` | Baixa caneta | `bc` |
| `sc` | Sobe caneta | `sc` |
| `f1` | Fala PT-BR | `f1 ola mundo` |
| `f2` | Fala EN | `f2 hello world` |
| `f3` | Fala EN-US | `f3 hello` |
| `f4` | Fala ES | `f4 hola` |
| `f5` | Fala DE | `f5 hallo` |

---

## Modulo IA - Funcionamento

### Fluxo de Operacao

1. Sistema aguarda **wake word** (ex: "Ola Jabuti")
2. LED pisca 500ms = modo espera
3. Usuario fala comando
4. LED pisca 100ms = conversacao ativa
5. Audio enviado para OpenAI Whisper (transcricao)
6. Texto enviado para GPT-4o-mini
7. GPT retorna resposta + comandos (ex: `COMANDOS;pf 1000;pd 250;`)
8. Sistema executa comandos via `interpreter.py`
9. Resposta convertida em audio via TTS
10. Apos 60s sem interacao, volta ao modo espera

### GPIO Utilizados

| Pino BCM | Funcao |
|----------|--------|
| 8 | LED indicador |
| 25 | Botao liga/desliga (com pull-up) |
| 23, 24 | Motor esquerdo |
| 17, 22 | Motor direito |
| 9 | LED direito (olho) |
| 11 | LED esquerdo (olho) |

---

## Modulos de Aprendizagem

| Modulo | Nivel | Descricao |
|--------|-------|-----------|
| 1 | Iniciante | Controle manual com setas e botoes |
| 2 | Basico | Programacao sequencial com botoes |
| 3 | Intermediario | Mais comandos disponiveis |
| 4 | Avancado | Programacao complexa |
| 5 | Expert | Uso de variaveis |
| 7 | Admin | Configuracoes do sistema |

---

## Banco de Dados

### Tabelas Principais

- `pessoa` - Usuarios do sistema
- `pessoa_tipo` - Tipos: Admin(1), Moderador(2), Usuario(3)
- `equipe` - Grupos de usuarios
- `instituicao` - Escolas/organizacoes
- `modulo` - Modulos disponiveis
- `pessoa_modulo` - Codigo salvo por usuario/modulo
- `equipamentos` - Robos cadastrados
- `configuracao` - Configuracoes globais (calibragem, versao, etc)
- `sessao` - Sessoes de login

---

## Pendencias Identificadas

### Seguranca (URGENTE)
- [ ] API Key OpenAI exposta no arquivo `.env` - ROTACIONAR!
- [ ] Senhas em texto plano no banco (MD5 seria melhor)
- [ ] Senha SSH fraca (123)

### Melhorias Tecnicas
- [ ] Atualizar PHP para versao mais recente
- [ ] Implementar prepared statements em todos os lugares
- [ ] Adicionar HTTPS

### Funcionalidades
- [ ] Definir escopo do MVP
- [ ] Testar modulo IA na Rasp
- [ ] Validar hardware (servos, LEDs, buzina, mic)

---

## Proximos Passos (Semana que Vem)

1. **Definir escopo MVP** - Qual funcionalidade priorizar?
2. **Testar IA** - Verificar se recognize.py funciona na Rasp
3. **Validar hardware** - Testar todos os componentes fisicos
4. **Rotacionar API Key** - Criar nova chave no OpenAI
5. **Iniciar desenvolvimento** - Conforme prioridades definidas

---

## Informacoes de Contato/Contexto

- O projeto ja existe e esta funcional
- Motores sao servos modificados (rotacao continua)
- Raspberry Pi 3 com Raspbian Bullseye
- Claude Code rodando no netbook (nao instalado na Rasp)
- Acesso SSH configurado entre netbook e Rasp

---

## Para Retomar a Sessao

Ao iniciar nova conversa, informar:
> "Estou retomando o projeto JABUTI IA. Leia o arquivo SESSAO_2026-02-06.md para contexto."

O arquivo esta em:
`/home/ejr-netbook-07/jabuti-ia/mvp-jabuti-ia/SESSAO_2026-02-06.md`

---

*Documento gerado automaticamente em 06/02/2026*
